$def with (canvas_id, entries, selected)
           
$# e = (ip, line name, label, color, symbol) 
$ formName = 'frmLegend_' + canvas_id
$ submitCmd = 'document.' + formName + '.submit();'

<form name="$formName" id="$formName" method="POST">
<input type="button" onClick="check_legend(document.$formName, false);" name="btnClear" value="Clear all">
<input type="button" onClick="check_legend(document.$formName, true);$submitCmd" name="btnCheckAll" value="Check all">
<input type="button" onClick="check_legend_group(document.$formName, '_mo', true);$submitCmd" name="btnCheckModified" value="Check all modified">
<input type="button" onClick="check_legend_group(document.$formName, '_in', true);$submitCmd" name="btnCheckInjected" value="Check all injected">
<input type="button" onClick="check_legend_group(document.$formName, '_dr', true);$submitCmd" name="btnCheckDropped" value="Check all dropped">
<input type="button" onClick="check_legend_group(document.$formName, '_to', true);$submitCmd" name="btnCheckTotal" value="Check all total packets">
<table>
    $for e in entries:
        $ selectName = e[1][4:]
        <tr><td><input type="checkbox" name="cb_$e[1]" value="on" onClick="$submitCmd"
        $if selected.get(selectName) == 'on':
            checked
        ></td><td><canvas id="$e[1]" height="10" width="50">You need Safari or Firefox 1.5+ to see this image.</canvas></td><td></td><td>$:e[2]</td></tr>
</table>
</form>

<script type="text/javascript">

    function gen_legend_$canvas_id () {

    $for e in entries:
        legend_entry("$e[1]", 50, 10, "$e[3]", "$e[4]");            
    }
    
    gen_legend_$canvas_id ();  

</script>
 
